<?xml version="1.0" encoding="utf-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>SentimentActor.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=2;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Jacoco Coverage Report</a> &gt; <a href="index.source.html" class="el_package">actors</a> &gt; <span class="el_source">SentimentActor.java</span></div><h1>SentimentActor.java</h1><pre class="source lang-java linenums">package actors;

import akka.actor.AbstractActor;
import akka.actor.Props;
import services.YTResponse;
import actors.ProjectProtocol.*;
import java.util.Arrays;
import java.util.List;
import java.util.concurrent.CompletableFuture;
import java.util.stream.Collectors;

<span class="fc" id="L12">public class SentimentActor extends AbstractActor {</span>
    String FinalOutput;

    /**
     * @author: Jiaxi Liu - 40278106
     * Created: 2024/11/24
     * The method creates an actors
     * @return SentimentActor
     */
    static public Props props() {
<span class="fc" id="L22">        return Props.create(SentimentActor.class);</span>
    }

    /**
     * @author: Jiaxi Liu - 40278106
     * Created: 2024/11/24
     * If the method receives message of SentimentCheck.class, check the sentiment and return a message to SentimentResponse()
     */
    @Override
    public Receive createReceive() {
<span class="fc" id="L32">        return receiveBuilder().</span>
<span class="fc" id="L33">                match(SentimentCheck.class, message-&gt;{</span>
                    //check the sentiment
                    SentimentService(message.input);
                    //return a message to SentimentResponse()
                    sender().tell(new ProjectProtocol.SentimentResponse(this.getFinalOutput()),self());
                        })
<span class="fc" id="L39">                .match(SentimentUpdate.class,message-&gt;{</span>
                    SentimentService(message.input);
                    sender().tell(new ProjectProtocol.SentimentUpdateResponse(this.getFinalOutput()),self());
                })
<span class="fc" id="L43">                .build();</span>
    }

    /**
     * @author: Jiaxi Liu - 40278106
     * Created: 2024/11/6
     * The method calculates the rate of positive words and negative words, then generates the sentiment string(&quot;:-)&quot;,&quot;:-(&quot;,&quot;:-|&quot;)
     * @param Input  is the information of videos
     */
    public void SentimentService(CompletableFuture&lt;List&lt;YTResponse&gt;&gt; Input){
<span class="fc" id="L53">        Input.thenApply(list -&gt;{</span>

            List&lt;Integer&gt; tempTotalWords;
            Double totalWords;
            Double happyWords;
            Double sadWords;

            //calculate the number of all words in all descriptions by stream
            tempTotalWords = list.stream()
                    .map(YTResponse::getDescription)
                    .map(Description -&gt;  Description.trim().split(&quot; &quot;).length)
                    .collect(Collectors.toList());

            totalWords = tempTotalWords.stream()
                            .map(num -&gt; (double)num)
                            .reduce(0.0,Double::sum);

            //calculate the number of positive words in all descriptions by stream
            //First calculate the number of positive words in each video then add them together
            happyWords = list.stream()
                    .map(YTResponse::getDescription)
                    .map(Description -&gt; Description.trim().split(&quot; &quot;))
                    .map(words -&gt; (double)countHappyWords(words))
                    .reduce(0.0, Double::sum);

            //calculate the number of negative words in all descriptions by stream
            //First calculate the number of negative words in each video then add them together
            sadWords = list.stream()
                    .map(YTResponse::getDescription)
                    .map(Description -&gt; Description.trim().split(&quot; &quot;))
                    .map(words -&gt; (double)countSadWords(words))
                    .reduce(0.0, Double::sum);

            //if the rate of positive words is bigger than 0.7(70%),set the FinalOutput as &quot;:-)&quot;
            if(happyWords/totalWords &gt;= 0.70)
                FinalOutput = &quot;:-)&quot;;
                //if the rate of negative words is bigger than 0.7(70%),set the FinalOutput as &quot;:-(&quot;
            else if (sadWords/totalWords &gt;= 0.70)
                FinalOutput = &quot;:-(&quot;;
                //If both of them are less than 0.7,set the FinalOutput as &quot;:-|&quot;
            else FinalOutput = &quot;:-|&quot;;

            return null;
        });


<span class="fc" id="L99">    }</span>

    /**
     * @author: Jiaxi Liu - 40278106
     * Created: 2024/11/6
     * The method is used to count the number of positive words in a single video description.
     * The method contains a list of positive words.
     * @param words is an array of words split from a video description.
     * @return NumOfHappyWord is the number of positive words.
     */
    public int countHappyWords(String[] words){
<span class="fc" id="L110">        List&lt;String&gt; listOfWords = Arrays.asList(words);</span>
<span class="fc" id="L111">        String[] happyWords = {&quot;happy&quot;, &quot;joyful&quot;, &quot;blissful&quot;, &quot;cheerful&quot;, &quot;satisfied&quot;, &quot;delighted&quot;, &quot;joy&quot;,&quot;affection&quot;, &quot;fondness&quot;, &quot;cherish&quot;, &quot;touched&quot;, &quot;attachment&quot;, &quot;warmth&quot;, &quot;deep affection&quot;,</span>
                &quot;motivated&quot;, &quot;encouraged&quot;, &quot;uplifted&quot;, &quot;energized&quot;, &quot;confident&quot;, &quot;brave&quot;, &quot;enthusiastic&quot;, &quot;admiration&quot;, &quot;respect&quot;, &quot;praise&quot;, &quot;appreciation&quot;, &quot;reverence&quot;, &quot;affirmation&quot;,
                &quot;thankful&quot;, &quot;grateful&quot;, &quot;appreciative&quot;, &quot;blessed&quot;, &quot;content&quot;, &quot;forgiving&quot;, &quot;understanding&quot;, &quot;comfortable&quot;, &quot;relaxed&quot;, &quot;ease&quot;, &quot;carefree&quot;, &quot;peaceful&quot;, &quot;calm&quot;, &quot;safe&quot;,
                &quot;success&quot;, &quot;achievement&quot;, &quot;fulfilled&quot;, &quot;pride&quot;, &quot;pleased&quot;, &quot;proud&quot;, &quot;progress&quot;, &quot;excitement&quot;, &quot;thrilled&quot;, &quot;eager&quot;, &quot;surprised&quot;, &quot;cheerful&quot;, &quot;lively&quot;, &quot;exhilarated&quot;,
                &quot;optimistic&quot;, &quot;hopeful&quot;, &quot;confident&quot;, &quot;positive&quot;, &quot;reassured&quot;, &quot;radiant&quot;, &quot;gleeful&quot;, &quot;buoyant&quot;, &quot;jubilant&quot;, &quot;elated&quot;, &quot;inspired&quot;, &quot;driven&quot;, &quot;focused&quot;, &quot;determined&quot;, &quot;empowered&quot;,
                &quot;fulfilled&quot;, &quot;accomplished&quot;, &quot;satisfied&quot;, &quot;rewarded&quot;, &quot;valued&quot;, &quot;vibrant&quot;, &quot;spirited&quot;, &quot;dynamic&quot;, &quot;animated&quot;, &quot;energetic&quot;, &quot;playful&quot;, &quot;lighthearted&quot;, &quot;amused&quot;, &quot;entertained&quot;, &quot;fun-loving&quot;,
                &quot;compassionate&quot;, &quot;empathetic&quot;, &quot;caring&quot;, &quot;kind-hearted&quot;, &quot;supportive&quot;, &quot;serene&quot;, &quot;tranquil&quot;, &quot;untroubled&quot;, &quot;harmonious&quot;, &quot;balanced&quot;, &quot;grounded&quot;, &quot;centered&quot;, &quot;mindful&quot;, &quot;aware&quot;, &quot;present&quot;,
                &quot;secure&quot;, &quot;protected&quot;, &quot;comforted&quot;, &quot;assured&quot;, &quot;safe&quot;, &quot;open-minded&quot;, &quot;accepting&quot;, &quot;tolerant&quot;, &quot;inclusive&quot;, &quot;flexible&quot;, &quot;curious&quot;, &quot;inquisitive&quot;, &quot;explorative&quot;, &quot;adventurous&quot;, &quot;engaged&quot;,
                &quot;hopeful&quot;, &quot;expectant&quot;, &quot;looking forward&quot;, &quot;anticipating&quot;, &quot;excited&quot;, &quot;charitable&quot;, &quot;generous&quot;, &quot;giving&quot;, &quot;selfless&quot;, &quot;thoughtful&quot;, &quot;appreciated&quot;, &quot;cherished&quot;, &quot;loved&quot;, &quot;adored&quot;, &quot;treasured&quot;,
                &quot;successful&quot;, &quot;victorious&quot;, &quot;celebrated&quot;, &quot;honored&quot;, &quot;noteworthy&quot;, &quot;enlightened&quot;, &quot;wise&quot;, &quot;perceptive&quot;, &quot;insightful&quot;, &quot;knowledgeable&quot;, &quot;whole&quot;, &quot;complete&quot;, &quot;unified&quot;, &quot;aligned&quot;, &quot;integrated&quot;,
                &quot;playful&quot;, &quot;youthful&quot;, &quot;joyous&quot;, &quot;sunny&quot;, &quot;radiant&quot;
        };

<span class="fc" id="L124">        long NumOfHappyWord = listOfWords.stream()</span>
<span class="fc" id="L125">                .filter(word -&gt; IfContain(word,happyWords))</span>
<span class="fc" id="L126">                .count();</span>

<span class="fc" id="L128">        return (int)NumOfHappyWord;</span>
    }


    /**
     * @author: Jiaxi Liu - 40278106
     * Created: 2024/11/6
     * The method is used to count the number of negative words in a single video description.
     * The method contains a list of negative words.
     * @param words is an array of words split from a video description.
     * @return NumOfSadWord is the number of negative words.
     */
    public int countSadWords(String[] words){
<span class="fc" id="L141">        List&lt;String&gt; listOfWords = Arrays.asList(words);</span>
<span class="fc" id="L142">        String[] sadWords = { &quot;sad&quot;, &quot;down&quot;, &quot;depressed&quot;, &quot;heartbroken&quot;, &quot;lonely&quot;, &quot;disappointed&quot;, &quot;unhappy&quot;, &quot;angry&quot;, &quot;furious&quot;, &quot;annoyed&quot;, &quot;frustrated&quot;, &quot;irritated&quot;, &quot;resentful&quot;, &quot;outraged&quot;,</span>
                &quot;afraid&quot;, &quot;scared&quot;, &quot;anxious&quot;, &quot;worried&quot;, &quot;nervous&quot;, &quot;alarmed&quot;, &quot;panicked&quot;, &quot;disgusted&quot;, &quot;revolted&quot;, &quot;repulsed&quot;, &quot;nauseated&quot;, &quot;sickened&quot;, &quot;offended&quot;, &quot;appalled&quot;,
                &quot;guilty&quot;, &quot;ashamed&quot;, &quot;remorseful&quot;, &quot;regretful&quot;, &quot;sorry&quot;, &quot;blameworthy&quot;, &quot;fault&quot;, &quot;ashamed&quot;, &quot;humiliated&quot;, &quot;embarrassed&quot;, &quot;disgraced&quot;, &quot;self-conscious&quot;, &quot;mortified&quot;,
                &quot;disappointed&quot;, &quot;discouraged&quot;, &quot;let down&quot;, &quot;disheartened&quot;, &quot;dissatisfied&quot;, &quot;regretful&quot;, &quot;frustrated&quot;, &quot;exasperated&quot;, &quot;irritated&quot;, &quot;stuck&quot;, &quot;defeated&quot;, &quot;helpless&quot;,
                &quot;exhausted&quot;, &quot;weary&quot;, &quot;drained&quot;, &quot;worn-out&quot;, &quot;fatigued&quot;, &quot;uneasy&quot;, &quot;tense&quot;, &quot;apprehensive&quot;, &quot;restless&quot;, &quot;agitated&quot;, &quot;confused&quot;, &quot;bewildered&quot;, &quot;lost&quot;, &quot;unsure&quot;,
                &quot;uncertain&quot;, &quot;hopeless&quot;, &quot;despairing&quot;, &quot;despondent&quot;, &quot;discouraged&quot;, &quot;downcast&quot;, &quot;disheartened&quot;, &quot;crestfallen&quot;, &quot;low-spirited&quot;, &quot;indifferent&quot;, &quot;apathetic&quot;, &quot;disinterested&quot;,
                &quot;unenthusiastic&quot;, &quot;ignored&quot;, &quot;neglected&quot;, &quot;unappreciated&quot;, &quot;overlooked&quot;, &quot;powerless&quot;, &quot;vulnerable&quot;, &quot;unsupported&quot;, &quot;defenseless&quot;, &quot;envious&quot;, &quot;jealous&quot;, &quot;resentful&quot;, &quot;covetous&quot;,
                &quot;bored&quot;, &quot;disinterested&quot;, &quot;unmotivated&quot;, &quot;uninspired&quot;, &quot;bitter&quot;, &quot;spiteful&quot;, &quot;grudging&quot;, &quot;resentful&quot;, &quot;isolated&quot;, &quot;alienated&quot;, &quot;excluded&quot;, &quot;ostracized&quot;, &quot;suppressed&quot;, &quot;repressed&quot;,
                &quot;restrained&quot;, &quot;stifled&quot;, &quot;empty&quot;, &quot;hollow&quot;, &quot;unfulfilled&quot;, &quot;meaningless&quot;, &quot;insecure&quot;, &quot;inadequate&quot;, &quot;inferior&quot;, &quot;unworthy&quot;, &quot;uneasy&quot;, &quot;perturbed&quot;, &quot;unsettled&quot;, &quot;jittery&quot;, &quot;fed up&quot;,
                &quot;sick&quot;, &quot;tired&quot;, &quot;disenchanted&quot;, &quot;controlled&quot;, &quot;manipulated&quot;, &quot;oppressed&quot;, &quot;exploited&quot;, &quot;agonized&quot;, &quot;tortured&quot;, &quot;tormented&quot;, &quot;distressed&quot;, &quot;shamed&quot;, &quot;disgraced&quot;, &quot;humiliated&quot;, &quot;mortified&quot;
        };

<span class="fc" id="L154">        long NumOfSadWord = listOfWords.stream()</span>
<span class="fc" id="L155">                .filter(word -&gt; IfContain(word,sadWords))</span>
<span class="fc" id="L156">                .count();</span>

<span class="fc" id="L158">        return (int)NumOfSadWord;</span>
    }

    /**
     * @author: Jiaxi Liu - 40278106
     * Created: 2024/11/6
     * The method is used to estimate if a word is in the word list.
     * @param word is a word in description.
     * @param keywords is the word list of positive words or negative words.
     */
    boolean IfContain(String word,String[] keywords){
<span class="fc" id="L169">        return Arrays.stream(keywords).anyMatch(keyword -&gt; keyword.contains(word));</span>
    }


    /**
     * @author: Jiaxi Liu - 40278106
     * Created: 2024/11/6
     * The method is used to get the final output(a symbol of sentiment).
     * @return  FinalOutput.
     */
    public String getFinalOutput() {
<span class="fc" id="L180">        return FinalOutput;</span>
    }


}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span></div></body></html>