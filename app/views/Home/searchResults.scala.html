@import Model.SearchForm
@import play.api.i18n.Messages
@import play.api.i18n.MessagesProvider
@import Model.TextSegment
@(keywords: ArrayList[String])(userList: ArrayList[ArrayList[ArrayList[TextSegment]]])(searchForm: Form[SearchForm])(implicit messagesProvider: MessagesProvider, request: play.mvc.Http.Request)

@import helper._

@*
* @author: Zheyi Zheng - 40266266
* Created: 2024/11/2
* This is the searchResults view. It contains the search bar and search results from history search.
*@

<html lang="en">
<head>
    <title>Welcome to YT Lytics</title>
</head>
<body>
    <h1>Welcome to YT Lytics</h1>
    <!-- Input form for keyword-->
    @helper.form(action = routes.HomeController.search()) {
    @helper.inputText(searchForm("keyword"))
    @helper.CSRF.formField
    <input type="submit" value="submit">
    }
<!-- Display search results-->
@for((responseList, index) <- userList.zipWithIndex) {
    <div class="response">
        <p>
            <!-- Print the keyword here then print search results for this keyword-->
            @keywords.get(index)
            <a href="@routes.WordCountController.videoStatistics(keywords.get(index))">More stats</a>
            @for(response <- responseList) {
                @for(segment <- response) {
                    <!-- Print all parts of the video information-->
                    @if(segment.url != null) {
                        <!-- Set hyperlink along with the text-->
                        <a href="@segment.url">@segment.text</a>
                    } else {
                        <!-- Only print the text, no hyperlink-->
                        @segment.text
                    }
                }
            }
        </p>

    </div>
}
</body>
</html>